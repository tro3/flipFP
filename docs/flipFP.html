<!DOCTYPE html>

<html>
<head>
  <title>flipFP.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>flipFP.coffee</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
x = <span class="hljs-built_in">module</span>.exports
p = <span class="hljs-built_in">console</span>.log

defers = []</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p><strong>splitAt</strong> =&gt; Int -&gt; ([] -&gt; [[],[]])</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_splitAt</span> = <span class="hljs-params">(n)</span> -&gt;</span>
  (lst) -&gt;
    r1 = []
    r2 = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..lst.length]
      <span class="hljs-keyword">if</span> i &lt; n <span class="hljs-keyword">then</span> r1.push lst[i] <span class="hljs-keyword">else</span> r2.push lst[i]
    [r1,r2]</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p><strong>maybePipe</strong> =&gt; (<em> -&gt; </em>) -&gt; (<em> -&gt; </em>) or a</p>
<p>Returns the original function generator if passed the proper
amount of parameters, and if passed more will returned the
executed function unless there is only on extra param and a
function is passed.  In that case, the fucnction passed will
be piped to the generated function.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>x.maybePipe = maybePipe = <span class="hljs-function"><span class="hljs-params">(fcn)</span> -&gt;</span>
  n = fcn.length
  split = _splitAt n
  () -&gt;
    <span class="hljs-keyword">if</span> arguments.length &gt; fcn.length
      [args1, args2] = split arguments  
      fn1 = fcn.apply(<span class="hljs-literal">null</span>, args1)
      <span class="hljs-keyword">if</span> args2.length == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">typeof</span> args2[<span class="hljs-number">0</span>] == <span class="hljs-string">'function'</span>
        fn2 = args2[<span class="hljs-number">0</span>]
        () -&gt; fn1(fn2.apply(<span class="hljs-literal">null</span>,arguments))
      <span class="hljs-keyword">else</span>
        fn1.apply(<span class="hljs-literal">null</span>,args2)
    <span class="hljs-keyword">else</span>
      fcn.apply(<span class="hljs-literal">null</span>,arguments)</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Making up for the lack of export before maybePipe defâ€™n</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>x.splitAt = splitAt = maybePipe _splitAt</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p><strong>maybePipeDirect</strong> =&gt; (<em> -&gt; </em>) -&gt; (<em> -&gt; </em>) or a</p>
<p>Returns the executed original function if passed a value
as an argument.  If passed a function, it will
be piped to the original function.  Only works for
single-argument functions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>x.maybePipeDirect = maybePipeDirect = <span class="hljs-function"><span class="hljs-params">(fcn)</span> -&gt;</span>
  (val) -&gt;
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">typeof</span> val == <span class="hljs-string">'function'</span>
      () -&gt; fcn(val.apply(<span class="hljs-literal">null</span>,arguments))
    <span class="hljs-keyword">else</span>
      fcn(val)</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p><strong>all</strong> =&gt; (a -&gt; Boolean) -&gt; ([a] -&gt; Boolean)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_all</span> = <span class="hljs-params">(fn)</span> -&gt;</span>
  (lst) -&gt;
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> lst
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> <span class="hljs-keyword">if</span> !(fn item)
    <span class="hljs-literal">true</span>
x.all = all = maybePipe _all</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p><strong>allPass</strong> =&gt; [(a -&gt; Boolean)] -&gt; (a -&gt; Boolean)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_allPass</span> = <span class="hljs-params">(lst)</span> -&gt;</span>
  (val) -&gt;
    <span class="hljs-keyword">for</span> fcn <span class="hljs-keyword">in</span> lst
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> <span class="hljs-keyword">if</span> !(fcn val)
    <span class="hljs-literal">true</span>
x.allPass = allPass = maybePipe _allPass</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p><strong>always</strong> =&gt; a -&gt; (* -&gt; a)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_always</span> = <span class="hljs-params">(val)</span> -&gt;</span>
  () -&gt; val
x.always = always = maybePipeDirect _always</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p><strong>any</strong> =&gt; (a -&gt; Boolean) -&gt; ([a] -&gt; Boolean)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_any</span> = <span class="hljs-params">(fn)</span> -&gt;</span>
  (lst) -&gt;
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> lst
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> <span class="hljs-keyword">if</span> (fn item)
    <span class="hljs-literal">false</span>
x.any = any = maybePipe _any</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p><strong>anyPass</strong> =&gt; [(a -&gt; Boolean)] -&gt; (a -&gt; Boolean)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_anyPass</span> = <span class="hljs-params">(lst)</span> -&gt;</span>
  (val) -&gt;
    <span class="hljs-keyword">for</span> fcn <span class="hljs-keyword">in</span> lst
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> <span class="hljs-keyword">if</span> (fcn val)
    <span class="hljs-literal">false</span>
x.anyPass = anyPass = maybePipe _anyPass</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p><strong>callAll</strong> =&gt; [(a -&gt; a)] -&gt; (a -&gt; [])</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_callAll</span> = <span class="hljs-params">(fcns)</span> -&gt;</span>
  (val) -&gt;
    result = []
    <span class="hljs-keyword">for</span> fcn <span class="hljs-keyword">in</span> fcns
      result.push fcn val
    result
x.callAll = callAll = maybePipe _callAll</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p><strong>chain</strong> =&gt; (a -&gt; []) -&gt; ([a] -&gt; [])</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_chain</span> = <span class="hljs-params">(fcn)</span> -&gt;</span>
  (lst) -&gt;
    result = []
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> lst
      <span class="hljs-keyword">for</span> res <span class="hljs-keyword">in</span> fcn(item)
        result.push res
    result
x.chain = chain = maybePipe _chain</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p><strong>compose</strong> =&gt; [(a -&gt; a)] -&gt; (a -&gt; a)</p>
<p>Canâ€™t be maybePipeâ€™d due to unknown arg count</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>x.compose = compose = <span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span>
  fcns = []
  <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> arguments
    fcns.push item
  fcns = fcns.reverse()
  () -&gt;
    val = fcns[<span class="hljs-number">0</span>].apply(<span class="hljs-number">0</span>, arguments)
    <span class="hljs-keyword">for</span> fcn <span class="hljs-keyword">in</span> fcns[<span class="hljs-number">1.</span>.]
      val = fcn(val)
    val</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p><strong>composeP</strong> =&gt; [(a -&gt; a)] -&gt; (a -&gt; a)</p>
<p>Canâ€™t be maybePipeâ€™d due to unknown arg count</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>x.composeP = composeP = <span class="hljs-function">-&gt;</span>
<span class="hljs-function">  <span class="hljs-title">_pipeP</span> = <span class="hljs-params">(f1,f2)</span> -&gt;</span>
    () -&gt; f1.apply(<span class="hljs-number">0</span>, arguments).<span class="hljs-keyword">then</span> (x) -&gt; f2(x)
  
  fcns = []
  <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> arguments
    fcns.push item
  fcns = fcns.reverse()
  q = fcns[<span class="hljs-number">0</span>].apply(<span class="hljs-number">0</span>, arguments)
  reduce(_pipeP, q, fcns[<span class="hljs-number">1.</span>.])</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p><strong>concat</strong> =&gt; []â€¦ -&gt; []</p>
<p>Canâ€™t be maybePipeâ€™d due to unknown arg count</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>x.concat = concat = <span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span>
  result = []
  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..arguments.length]
    list = arguments[i]
    list = [list] <span class="hljs-keyword">if</span> !(list <span class="hljs-keyword">instanceof</span> Array)
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> list
      result.push item
  result</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p><strong>clone</strong> =&gt; {} -&gt; {}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>defers.push -&gt;
  x.clone = clone = traverseObj id,id,id</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p><strong>drop</strong> =&gt; Int -&gt; ([] -&gt; {})</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_drop</span> = <span class="hljs-params">(n)</span> -&gt;</span>
  (lst) -&gt;
    r = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [n...lst.length]
      r.push lst[i]
    r
x.drop = drop = maybePipe _drop</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p><strong>filter</strong> =&gt; (a -&gt; Boolean) -&gt; ([] -&gt; [])</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_filter</span> = <span class="hljs-params">(fcn)</span> -&gt;</span>
  (lst) -&gt;
    r = []
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> lst
      r.push item <span class="hljs-keyword">if</span> fcn item
    r
x.filter = filter = maybePipe _filter</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p><strong>filterIndex</strong> =&gt; (a,i -&gt; Boolean) -&gt; ([] -&gt; [])</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_filterIndex</span> = <span class="hljs-params">(fcn)</span> -&gt;</span>
  (lst) -&gt;
    r = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..lst.length]
      r.push lst[i] <span class="hljs-keyword">if</span> fcn lst[i], i
    r
x.filterIndex = filterIndex = maybePipe _filterIndex</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p><strong>flatten</strong> =&gt; [[]] -&gt; []</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_flatten</span> = <span class="hljs-params">(lst)</span> -&gt;</span>
  r = []
  <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> lst
    <span class="hljs-keyword">if</span> item <span class="hljs-keyword">instanceof</span> Array
      subs = _flatten item
      r = r.concat subs
    <span class="hljs-keyword">else</span> r.push item
  r
x.flatten = flatten = maybePipeDirect _flatten</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p><strong>id</strong> =&gt; a -&gt; a</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>x.id = id = <span class="hljs-function"><span class="hljs-params">(a)</span> -&gt;</span> a</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p><strong>init</strong> =&gt; [] -&gt; []</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_init</span> = <span class="hljs-params">(lst)</span> -&gt;</span>
    r = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..lst.length-<span class="hljs-number">1</span>]
      r.push lst[i]
    r
x.init = init = maybePipe _init</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p><strong>isNothing</strong> =&gt; a -&gt; Boolean</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_isNothing</span> = <span class="hljs-params">(a)</span> -&gt;</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> <span class="hljs-keyword">if</span> a <span class="hljs-keyword">in</span> [<span class="hljs-literal">null</span>, <span class="hljs-literal">undefined</span>]
  <span class="hljs-keyword">return</span> a.trim().length == <span class="hljs-number">0</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">typeof</span> a == <span class="hljs-string">'string'</span>
  <span class="hljs-keyword">return</span> Object.keys(a).length == <span class="hljs-number">0</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">typeof</span> a == <span class="hljs-string">'object'</span> 
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
x.isNothing = isNothing = maybePipeDirect _isNothing</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p><strong>keys</strong> =&gt; ({} -&gt; [String])</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_keys</span> = <span class="hljs-params">(a)</span> -&gt;</span> Object.keys a
x.keys = keys = maybePipeDirect _keys</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p><strong>map</strong> =&gt; (a -&gt; a) -&gt; ([a] -&gt; [a])</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_map</span> = <span class="hljs-params">(fcn)</span> -&gt;</span>
  (lst) -&gt;
    result = []
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> lst
      result.push fcn(item)
    result
x.map = map = maybePipe _map</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p><strong>mapIndex</strong> =&gt; (a,Int -&gt; a) -&gt; ([a] -&gt; [a])</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_mapIndex</span> = <span class="hljs-params">(fcn)</span> -&gt;</span>
  (lst) -&gt;
    result = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..lst.length]
      result.push fcn(lst[i], i)
    result
x.mapIndex = mapIndex = maybePipe _mapIndex</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p><strong>mapObj</strong> =&gt; (a -&gt; a) -&gt; ({} -&gt; {})</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_mapObj</span> = <span class="hljs-params">(fcn)</span> -&gt;</span>
  (obj) -&gt;
    result = {}
    <span class="hljs-keyword">for</span> key, item <span class="hljs-keyword">of</span> obj
      result[key] = fcn(item)
    result
x.mapObj = mapObj = maybePipe _mapObj</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p><strong>pipe</strong> =&gt; [(a -&gt; a)] -&gt; (a -&gt; a)</p>
<p>Canâ€™t be maybePipeâ€™d due to unknown arg count</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>x.pipe = pipe = <span class="hljs-function">-&gt;</span>
  fcns = []
  <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> arguments
    fcns.push item
  () -&gt;
    val = fcns[<span class="hljs-number">0</span>].apply(<span class="hljs-number">0</span>, arguments)
    <span class="hljs-keyword">for</span> fcn <span class="hljs-keyword">in</span> fcns[<span class="hljs-number">1.</span>.]
      val = fcn(val)
    val</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p><strong>pipeP</strong> =&gt; [(a -&gt; a)] -&gt; (a -&gt; a)</p>
<p>Canâ€™t be maybePipeâ€™d due to unknown arg count</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>x.pipeP = pipeP = <span class="hljs-function">-&gt;</span>
<span class="hljs-function">  <span class="hljs-title">_pipeP</span> = <span class="hljs-params">(f1,f2)</span> -&gt;</span>
    () -&gt; f1.apply(<span class="hljs-number">0</span>, arguments).<span class="hljs-keyword">then</span> (x) -&gt; f2(x)
  
  fcns = []
  <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> arguments
    fcns.push item
  q = fcns[<span class="hljs-number">0</span>].apply(<span class="hljs-number">0</span>, arguments)
  reduce(_pipeP, q, fcns[<span class="hljs-number">1.</span>.])</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p><strong>prop</strong> =&gt; String -&gt; ({} -&gt; a)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_prop</span> = <span class="hljs-params">(key)</span> -&gt;</span> (obj) -&gt; obj[key]
x.prop = prop = maybePipe _prop</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p><strong>reduce</strong> =&gt; (a -&gt; a) -&gt; ({} -&gt; {})</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>x.reduce = reduce = <span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span>
<span class="hljs-function">  <span class="hljs-title">_reduce</span> = <span class="hljs-params">(fcn, init, lst)</span> -&gt;</span>
    acc = init
    <span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> lst
      acc = fcn(acc, val)
    acc

  fcn = arguments[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">if</span> arguments.length &gt; <span class="hljs-number">1</span>
    init = arguments[<span class="hljs-number">1</span>]
    (lst) -&gt; _reduce(fcn, init, lst)
  <span class="hljs-keyword">else</span>
    (init, lst) -&gt; _reduce(fcn, init, lst)</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p><strong>splitHead</strong> =&gt; [a] -&gt; [a,[]]</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_splitHead</span> = <span class="hljs-params">(lst)</span> -&gt;</span> [lst[<span class="hljs-number">0</span>], tail lst]
x.splitHead = splitHead = maybePipeDirect _splitHead</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p><strong>splitLast</strong> =&gt; [a] -&gt; [[],a]</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_splitHead</span> = <span class="hljs-params">(lst)</span> -&gt;</span> [init lst, lst[-<span class="hljs-number">1.</span>.-<span class="hljs-number">1</span>]]
x.splitLast = splitLast = maybePipeDirect _splitHead</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p><strong>tail</strong> =&gt; [] -&gt; []</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_tail</span> = <span class="hljs-params">(lst)</span> -&gt;</span>
    r = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">1.</span>..lst.length]
      r.push lst[i]
    r
x.tail = tail = maybePipeDirect _tail</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p><strong>take</strong> =&gt; Int -&gt; ([] -&gt; {})</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_take</span> = <span class="hljs-params">(n)</span> -&gt;</span>
  (lst) -&gt;
    r = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..n]
      r.push lst[i]
    r
x.take = take = maybePipe _take</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p><strong>traverseObj</strong> =&gt; (a -&gt; a) -&gt; ({} -&gt; {}) -&gt; ({} -&gt; {}) -&gt; ({} -&gt; {})</p>
<p>The first object function is executed before descending, the second operates
on the object resulting after descending</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>x.traverseObj = traverseObj = <span class="hljs-function"><span class="hljs-params">(valFcn, preFcn, postFcn)</span> -&gt;</span>
<span class="hljs-function">  <span class="hljs-title">loopFn</span> = <span class="hljs-params">(val)</span> -&gt;</span>
    <span class="hljs-keyword">if</span> val <span class="hljs-keyword">instanceof</span> Array <span class="hljs-keyword">then</span> loopOverList val
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">typeof</span> val == <span class="hljs-string">'object'</span> <span class="hljs-keyword">then</span> processObj val
    <span class="hljs-keyword">else</span> valFcn val

  loopOverObj = mapObj loopFn
  loopOverList = _map loopFn
  
  processObj = pipe(
    preFcn
    loopOverObj
    postFcn
  )</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p><strong>zipObj</strong> =&gt; [] -&gt; ([] -&gt; {})</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_zip</span> = <span class="hljs-params">(keys)</span> -&gt;</span>
  (vals) -&gt;
    r = {}
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..keys.length]
      r[keys[i]] = vals[i]
    r
x.zipObj = zipObj = maybePipe _zip</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p><strong>zipKeys</strong> =&gt; (String -&gt; a) -&gt; ([String] -&gt; {})</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-title">_zipKeys</span> = <span class="hljs-params">(fcn)</span> -&gt;</span>
  (keys) -&gt;
    r = {}
    <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> keys
      r[key] = fcn key
    r
x.zipKeys = zipKeys = maybePipe _zipKeys



defers.forEach (fcn) -&gt; fcn()</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>Speed testing</p>

            </div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>keys = [â€˜aâ€™,â€™bâ€™,â€™câ€™,â€™dâ€™,â€™eâ€™]
vals = [1,2,3,4,5]
f0 = _zip keys
f1 = zip keys
n=1000000</p>
<p>t0 = Date.now()
for i in [0â€¦n]
 f0 vals
p Date.now() - t0</p>
<p>t0 = Date.now()
for i in [0â€¦n]
 f1 vals
p Date.now() - t0</p>
<p>t0 = Date.now()
for i in [0â€¦n]
 zip keys, vals
p Date.now() - t0</p>

            </div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>map = maybePipe _map</p>
<p>add = (x) -&gt; x + 1
range = (x) -&gt; [0â€¦x]</p>
<p>p â€˜compilingâ€™</p>
<p>mapAddA = _map add
mapAddB = map add
mapAddRange = map add, range</p>
<p>p â€˜executingâ€™</p>
<p>p mapAddA(range(4))
p mapAddRange(4)
p mapAddB(range(4))
p map add, range(4)</p>
<p>m = 10
n = 150000</p>
<p>t0 = Date.now()
for i in [0â€¦n]
 mapAddA(range(m))
p Date.now() - t0</p>
<p>t0 = Date.now()
for i in [0â€¦n]
 mapAddRange(m)
p Date.now() - t0</p>
<p>t0 = Date.now()
for i in [0â€¦n]
 mapAddB(range(m))
p Date.now() - t0</p>
<p>t0 = Date.now()
for i in [0â€¦n]
 map add, range(m)
p Date.now() - t0</p>

            </div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
